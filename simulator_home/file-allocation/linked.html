<html>
<head>
	<meta charset="utf-8">
	<title>Linked Allocation</title>
	<style>
	.s_hide{
		display: none;
	}
	.s_show{
		display: block;
	}
	.some{
		background-color: #3CBC8D;
		color:black;
	}

	input{
		width: 10%;
    padding: 12px 20px;
    margin: 8px 0;
    box-sizing: border-box;
    border: none;
    background-color: #3CBC8D;
    color: white;
	}

	.anchor{
			 background-color: black; /* Green */
    border: none;
    color: white;
    padding: 12px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 8px 0;
    -webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
    cursor: pointer;
	}
	.button1 {
    background-color: black; /* Green */
    border: none;
    color: white;
    padding: 12px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 8px 0;
    -webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
    cursor: pointer;
    }



.button1:hover {
    background-color: #3CBC8D;
    color: white;
}



	</style>
</head>

<body onload="initialise()">

	<marquee class="some" behavior="alternate" scrollamount=10 align="center"><h1>Linked Scheduling</h1></marquee>
<p> Enter the number of files </p>
	<input id="nof" type="number">

	<button class="button1" onclick="show_fields()">OK</button>
	
	<!-- =======================input fields =================================-->
	<form class="s_hide">
			<p> Your First File </p>
		File index:	<input  class="file_no" type="number">
		Enter the number of Blocks:	<input type="number">
		<div class="anchor">
			<a onclick="inside_form(0)">DONE</a> 
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>		
			</ul>
			<div class="anchor">
			<a onclick="allocate(0)">ALLOCATE</a> 
			
		</div>
		</form>

	<form class="s_hide">
			<p> Your Second File </p>
		File index:	<input  class="file_no" type="number">
		Enter the number of files:	<input type="number">
		<div class="anchor" onclick="inside_form(1)">
			<a>DONE</a> 
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>		
			</ul>
			<div class="anchor">
			<a onclick="allocate(1)">ALLOCATE</a> 
		</div>
	</form>

	<form class="s_hide">
			<p> Your Third File </p>
		File index:	<input  class="file_no" type="number">
		Enter the number of files:	<input type="number">
		<div class="anchor" onclick="inside_form(2)">
			<a>DONE</a> 
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>		
			</ul>
			<div class="anchor">
			<a onclick="allocate(2)">ALLOCATE</a> 
		</div>
	</form>

	<form class="s_hide">
			<p> Your Fourth File </p>
		File index:	<input  class="file_no" type="number">
		Enter the number of files:	<input type="number">
		<div class="anchor" onclick="inside_form(3)">
			<a>DONE</a> 
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>		
			</ul>
			<div class="anchor">
			<a onclick="allocate(3)">ALLOCATE</a> 
		</div>
	</form>

		<form class="s_hide">
			<p> Your Fifth File </p>
		File index:	<input  class="file_no" type="number">
		Enter the number of files:	<input type="number">
		<div class="anchor" onclick="inside_form(4)">
			<a>DONE</a> 
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>		
			</ul>
			<div class="anchor">
			<a onclick="allocate(4)">ALLOCATE</a> 
		</div>
		</form>

		<form class="s_hide">
			<p> Your Sixth File </p>
		     File index:	<input  class="file_no" type="number">
		Enter the number of files:	<input type="number">
		<div class="anchor" onclick="inside_form(5)">
			<a>DONE</a> 
		</div>
				<ul>
			<li class="s_hide">	Block_1:<input  type="number"></li>
			<li class="s_hide">	Block_2:<input  type="number"></li>
			<li class="s_hide">	Block_3:<input  type="number"></li>
			<li class="s_hide">	Block_4:<input  type="number"></li>
			<li class="s_hide">	Block_5:<input  type="number"></li>
			<li class="s_hide">	Block_6:<input  type="number"></li>
			<li class="s_hide">	Block_7:<input  type="number"></li>
			<li class="s_hide">	Block_8:<input  type="number"></li>
			<li class="s_hide">	Block_9:<input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>		
			</ul>
			<div class="anchor">
			<a onclick="allocate(5)">ALLOCATE</a> 
		</div>
		</button>
		</form>

		<form class="s_hide">
			<p> Your Seventh File </p>
		File index:	<input  class="file_no" type="number">
		<Enter the number of files:	<input type="number">
		<div class="anchor" onclick="inside_form(6)">
			<a >DONE</a> 
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>		
			</ul>
			<div class="anchor">
			<a onclick="allocate(6)">ALLOCATE</a> 
		</div>
		</form>

		<form class="s_hide">
			<p> Your Eight File </p>
		File index:	<input  class="file_no" type="number">
		Enter the number of files:	<input type="number">
		<div class="anchor" onclick="inside_form(7)">
			<a>DONE</a> 
		</div>
			<ul>
			<li class="s_hide">	Block_1: <input  type="number"></li>
			<li class="s_hide">	Block_2: <input  type="number"></li>
			<li class="s_hide">	Block_3: <input  type="number"></li>
			<li class="s_hide">	Block_4: <input  type="number"></li>
			<li class="s_hide">	Block_5: <input  type="number"></li>
			<li class="s_hide">	Block_6: <input  type="number"></li>
			<li class="s_hide">	Block_7: <input  type="number"></li>
			<li class="s_hide">	Block_8: <input  type="number"></li>
			<li class="s_hide">	Block_9: <input  type="number"></li>
			<li class="s_hide">	Block_10:<input type="number"></li>		
			</ul>
			<div class="anchor">
			<a onclick="allocate(7)">ALLOCATE</a> 
		</div>
		</form>
<div class="del">
	<h4> Enter the number of the file you want to delete </h4>
	 	<input type="number" class="file_delete">
	<button class="button1"  onclick="delete_form()">DELETE</button>
</div>

<p id="error_check"></p>
<div class="s_hide" id="output_space">
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
	<p class="out"></p>
</div>

</body>

<script>
/*to display the input fields*/
	var form_no = -1;
	var file_ind=[];
	var show_output= -1;
	var str="";

	function show_fields()
	{
			var no_of_files = document.getElementById("nof").value;
			for(var i=0;i<no_of_files;++i)	
				s_add_in();
		
	}

	function s_add_in()
	{
		form_no = form_no +1;
		var f = document.getElementsByTagName("form")[form_no];

		var att = document.createAttribute("class");
		att.value ="s_show";

		f.setAttributeNode(att);
	}

/*to display the block numbers*/
var block_number=[];

windows.onload = function()
{
	initialise();
};

	function initialise()
	{
		for(var i=0;i<8;++i)
		{
			block_number.push(-1);
		}
		for(var i=0;i<1000;++i)
			file_ind.push(-1);
	}

	function inside_form(form_numb)
	{
		var pos = 12*form_numb;		//this is the base value
/*		document.getElementById("sample").innerHTML = block_number[form_numb];*/
		var ch = check(form_numb);
		if(ch == 0)
			return;

		var no_of_blocks = document.getElementsByTagName("input")[pos+2].value;
		var pos_li = form_numb *10;
		for(var i=0;i<no_of_blocks;++i)
		{
			var f = document.getElementsByTagName("li")[pos_li+i];

			var att = document.createAttribute("class");
			att.value ="s_show";
			f.setAttributeNode(att);
		}
	}

	function check(in_num)
	{
		var len = file_ind.length;
		var z = in_num *12 +1;
		var index = document.getElementsByTagName("input")[z].value;

		if(file_ind[index] == 1)
		{
			alert("The file index "+ index +"is already allocated");
			return 0;
		}
		else
		{
			file_ind[index]  =1;
			return 1;
		}
	}
	
	function allocate(in_form)
	{	
		var pos = 12* in_form;
		var values = in_form * 10;
		var no_of_blocks = document.getElementsByTagName("input")[pos+2].value;

		//for each and every entry check whether it is allocated or not
		for(var i=0;i<no_of_blocks;++i)
		{
			var x1 = document.getElementsByTagName("li")[values+i];	//this will give us the values+i th li element
			var x = x1.getElementsByTagName("input")[0].value;		// this will give us the 0th input element in the x1 li , we put 0 coz each li has 																only 1 input
			if(file_ind[x] == 1)
			{
				alert("The file index "+ x +" is already allocated");
				return;
			}
			
			else{
				file_ind[x]=1;
			}
			if(i == no_of_blocks-1)
			{

				var f = document.getElementById("output_space");
				var att = document.createAttribute("class");
				att.value = "s_show";
				f.setAttributeNode(att);

				var index_value = document.getElementsByTagName("input")[pos+1].value;
				str = str + index_value;
				str = str + " -> ";
				for(var i=0;i<no_of_blocks;++i)
				{
					

					var x1 = document.getElementsByTagName("li")[values+i];
					var x = x1.getElementsByTagName("input")[0].value;

					if(i != no_of_blocks-1)
					{
						str = str + x;
						str = str + " -> ";
					}

					if(i == no_of_blocks-1)
					{
						str = str + x;
						var f = document.getElementsByClassName("out")[0];
						alert(str);
						f.innerHTML = str;
						if(in_form == 0){
							f.style.backgroundColor = "red";
						}

						if(in_form == 1){
							f.style.backgroundColor = "grey";
						}

					}
				}
			}
		}
	}


	function delete_file()
	{
		var f = document.getElementById("file_delete").value;
		//check whether this file number exists
		for(var i=0;i<8;++i)
		{
			var x = document.getElementsByClassName("file_no")[i].value;
			if(f == x)
			{
				var q = document.getElementsByClassName("out")[i];
				q.innerHTML= "";
				

				//now deallocate thw allocated files
				var pos = 12* i;
				var no_of_blocks = document.getElementsByTagName("input")[pos+2].value;
				var values = i * 10;

				for(var j=0;j<no_of_blocks;++j)
				{
					var x1 = document.getElementsByTagName("li")[values+j];	
					var x = x1.getElementsByTagName("input")[0].value;

					file_ind[x] = -1;		
				}
				alert("all files deleted");
				break;
			}

			if(i == 7)
			{
				alert("file not found");
			}

		}
	}
</script>

</html>

